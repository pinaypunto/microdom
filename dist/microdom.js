/* microdom v0.0.1 - 2014/3/4
   http://
   Copyright (c) 2014 Ignacio Olalde - Licensed  */
!function(){var a={MATCH:document.body.webkitMatchesSelector?"webkitMatchesSelector":"mozMatchesSelector"};DOM=function(){var a=arguments;if(a.length>1)return new b(c.apply(null,a));if("string"==typeof a[0])try{return new b(document.querySelectorAll(a[0]))}catch(d){return new b(i(a[0]))}else if("function"==typeof a[0])document.body.onload=a[0];else if("object"==typeof a[0])return new b([a[0]])};var b=function(a){this.elements=a,this.instanced=!0};b.prototype.bind=function(a,b){return h(this.elements,a,b),this},b.prototype.on=function(a,b,c){return h(this.elements,b,function(b){d(b.target,a)&&c.call(c,b)}),this},b.prototype.each=function(a){for(var b=0,c=this.elements.length;c>b;b++)a.call(a,this.elements[b],b)},b.prototype.matches=function(a){var b=!1;return this.each(function(c){b=d(c,a),!b}),b},b.prototype.addClass=function(a){this.each(function(b){g("add",b,a)})},b.prototype.removeClass=function(a){this.each(function(b){g("remove",b,a)})},b.prototype.toggleClass=function(a){this.each(function(b){g("toggle",b,a)})},b.prototype.append=function(a){a=a.instanced!==!0?DOM(a):a;var b=this.elements.length>1;f(this,a,function(a,c){a.appendChild(b?c.cloneNode(!0):c)})},b.prototype.prepend=function(a){a=a.instanced!==!0?DOM(a):a;var b=this.elements.length>1;f(this,a,function(a,c){c=b?c.cloneNode(!0):c,0===a.childNodes.length?a.appendChild(c):a.insertBefore(c,a.childNodes[0])})},b.prototype.remove=function(){this.each(function(a){a.remove()})},b.prototype.attr=function(a,b){if(b)return this.each(function(c){c.setAttribute(a,b)}),this;var c=[];return this.each(function(b){c.push(b.getAttribute(a))}),1===c.length?c[0]:c},b.prototype.removeAttr=function(a){this.each(function(b){b.removeAttribute(a)})},b.prototype.data=function(a,b){return this.attr("data-"+a,b)},b.prototype.html=function(a){e(this,"innerHTML",a)},b.prototype.text=function(a){e(this,"innerText",a)};var c=function(a,b){return"#"===a?[document.getElementById(b)]:"."===a?document.getElementsByClassName(b):""===a?document.getElementsByTagName(b):void 0},d=function(b,c){return b[a.MATCH](c)},e=function(a,b,c){if(!c){var d=[];return a.each(function(a){d.push(a[b])}),1==d.length?d[0]:d}a.each(function(a){a[b]=c})},f=function(a,b,c){a.each(function(a){b.each(function(b){c.call(c,a,b)})})},g=function(a,b,c){b.classList[a](c)},h=function(a,b,c){for(var d=0,e=a.length;e>d;d++)a[d].addEventListener(b,c,!1)},i=function(a){var b=document.createElement("div");return b.innerHTML=a,b.childNodes};window.$=DOM}(),function(){var a=window.DOM,b=null,c=function(a){var b="",c=[];for(b in a)c.push(encodeURIComponent(b)+"="+encodeURIComponent(a[b]));return"?"+c.join("&")};a.ajax=function(a,b,d){var e=new XMLHttpRequest;a=a.toUpperCase(),e.withCredentials=!0,"GET"==a&&(b+=b+"?"+c(d),d=null),e.open(a,b,!0)},a.ajax.onTimeout=function(a){b=a}}(),function(){var a=window.DOM;a.Gesture=function(){function a(a){g=null,h={},a&&(h.startTime=new Date,h.startPositions=b(event))}function b(a){for(var b=[],c=0,d=a.touches.length;d>c;c++)b.push({x:a.touches[c].pageX,y:a.touches[c].pageY});return b}function c(){var a=0,b=h.positions.length;for(h.deltas=[];b>a;a++)h.deltas.push({x:h.positions[a].x-h.startPositions[a].x,y:h.positions[a].y-h.startPositions[a].y});h.deltaTime=new Date-h.startTime}function d(a,b){var c,d=0,e=f.length;g=a;for(var i=JSON.parse(JSON.stringify(h));e>d;d++)c=f[d][b],c&&c.call(null,a,i)}var e={},f=[],g=null,h={},i=function(b){a(!0),d(b,"start")},j=function(a){h.positions=b(a),h.deltaTime=new Date-h.startTime,c(),d(a,"move")},k=function(b){h.deltaTime=new Date-h.startTime,d(b,"end"),a(!1)},l=function(b){d(b,"cancel"),a(!1)};return document.body.addEventListener("touchstart",i,!1),document.body.addEventListener("touchmove",j,!1),document.body.addEventListener("touchend",k,!1),document.body.addEventListener("touchcancel",l,!1),{register:function(a,b){f.push(b);for(var c=0,d=a.length;d>c;c++)e[a[c]]=new CustomEvent(a[c],{bubbles:!0,cancelable:!0})},trigger:function(a,b){var c,d=e[a];if(d.originalEvent=g,d.gestureData=JSON.parse(JSON.stringify(h)),b)for(c in b)d.gestureData[c]=b[c];g.target.dispatchEvent(d)},asyncTrigger:function(a,b,c){b.dispatchEvent(e[a],c)}}}()}(),function(){DOM.Gesture.register(["tap","hold","doubleTap","singleTap"],function(){var a=300,b=300,c=450,d=3,e=!1,f=!1,g=null,h=null,i=function(b,c){e=1===c.startPositions.length,e&&(g=setTimeout(l(b.target),a))},j=function(a,b){var c=b.deltas[0];e=1===b.deltas.length&&Math.abs(c.x)<d&&Math.abs(c.y)<d,e||(clearTimeout(g),clearTimeout(h))},k=function(a,d){e&&d.deltaTime<b&&(clearTimeout(g),DOM.Gesture.trigger("tap"),f?(clearTimeout(h),DOM.Gesture.trigger("doubleTap"),f=!1):(h=setTimeout(m(a.target),c),f=!0))},l=function(a){return function(){DOM.Gesture.asyncTrigger("hold",a)}},m=function(a){return function(){DOM.Gesture.asyncTrigger("singleTap",a),f=!1}};return{start:i,move:j,end:k}}())}(),function(){DOM.Gesture.register(["swiping","swipe"],function(){var a=!1;return{start:function(){a=!1},move:function(b,c){a=1===c.deltas.length,a&&DOM.Gesture.trigger("swiping",!0)},end:function(){a&&DOM.Gesture.trigger("swipe",!0)}}}())}();